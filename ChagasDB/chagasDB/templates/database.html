{% extends 'base.html' %}  
{% block content %}
    {% load static %}  
    {% load my_templatetags %}
    {% include 'database_fcts.html' %}  

    {# Page Heading #}
    <header class="bg-white shadow">
        <div class="max-w-7xl mx-auto py-3 px-4 sm:px-6 lg:px-8">
            <h2 class="font-semibold text-2xl text-neutral-800 leading-tight">
                Browse and download data
            </h2>
        </div>
    </header>

    {# Page Content #}
    <main class="">
        <div class="py-5 px-10">
            <div class="max-w-7xl mx-auto block rounded mb-3">
                <div class="justify-center px-3">
                    <div class="z-0 flex items-center justify-center">
                        <svg class="left-0 h-6 w-6 fill-current text-neutral-800" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 56.966 56.966" style="enable-background:new 0 0 56.966 56.966;" xml:space="preserve" width="512px" height="512px">
                            <path d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z" />
                        </svg>
                        {# Form start for filters submission #}
                        <form id="ChagasFilters" method="get" class="z-0 flex items-center justify-center">
                            <div id="searchDiv" class="relative">
                                {{myFilter.form.multifilter}}
                                <datalist id="feature_options">
                                    {% for value in feature_options %}
                                        <option value="{{value}}">
                                    {% endfor %}
                                </datalist>
                            </div>
                            <div id="btnFilter" class="absolute w-fit ml-[800px] pl-2 z-10 cursor-pointer border-l-4 border-orange-700 hover:text-orange-700 focus:text-orange-600 focus:outline-none">
                                <div class="flex  py-1 items-center">
                                    <span class="ml-0 font-semibold pr-2">Filter</span>
                                    <svg class="h-4 w-4 fill-current" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                        <path d="M246.6 470.6c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 402.7 361.4 265.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-160 160zm160-352l-160 160c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 210.7 361.4 73.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3z"/>
                                    </svg>
                                </div>
                            </div>
                    </div>

                        {# Filters (toggle) #}
                        <div id="divFilter" style="display:none" class="mt-4 w-fit mx-auto juystify-center text-normal">
                            <div class="w-fit mx-auto juystify-center">
                                <div class="grid grid-cols-6 gap-2 justify-center">

                                    <span class="font-medium">Feature Type:</span>
                                    <div class="relative  cursor-pointer  text-white focus:outline-none bg-orange-700 hover:bg-orange-600 rounded-lg">
                                        <div filter="feature_type" class="flex justify-center btnFilterClass items-center">
                                            <span class="font-normal pr-2">Select values</span>
                                            <svg class="h-4 w-4 fill-current" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                                <path d="M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"/>
                                            </svg>
                                        </div>
                                        <div id="Div_feature_type" class="hidden z-40 w-full absolute rounded bg-white shadow">
                                            <ul class="p-3 space-y-3 text-sm" aria-labelledby="dropdownRadioButton">
                                                {% for i in myFilter.form.feature_type %}
                                                    <li>
                                                    <div class="flex items-center">
                                                        <label for="default-radio-1" class="text-sm font-medium text-stone-800">{{i}}</label>
                                                    </div>
                                                </li>
                                                {%endfor%}
                                            </ul>
                                        </div>
                                    </div>

                                    <span class="font-medium">Feature variation:</span>
                                    <div class="relative cursor-pointer text-white focus:outline-none bg-orange-700 hover:bg-orange-600 rounded-lg">
                                        <div filter="feature_variation" class="flex btnFilterClass justify-center items-center">
                                            <span class="font-normal pr-2">Select values</span>
                                            <svg class="h-4 w-4 fill-current" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                                <path d="M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"/>
                                            </svg>
                                        </div>
                                        <div id="Div_feature_variation" class="hidden z-40 w-full absolute rounded divide-y divide-gray-100 bg-white shadow">
                                            <ul class="p-3 space-y-3 text-sm" aria-labelledby="dropdownRadioButton">
                                                {% for i in myFilter.form.feature_variation %}
                                                    <li>
                                                    <div class="flex items-center">
                                                        <label for="default-radio-1" class="text-sm font-medium text-stone-800">{{i}}</label>
                                                    </div>
                                                </li>
                                                {%endfor%}
                                            </ul>
                                        </div>
                                    </div>

                                    <span class="font-medium">Phenotype:</span>
                                    <div class="relative cursor-pointer text-white focus:outline-none bg-orange-700 hover:bg-orange-600 rounded-lg">
                                        <div filter="phenotype" class="flex  btnFilterClass justify-center items-center">
                                            <span class="font-normal pr-2">Select values</span>
                                            <svg class="h-4 w-4 fill-current" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                                <path d="M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"/>
                                            </svg>
                                        </div>
                                        <div id="Div_phenotype" class="hidden z-40 w-full absolute rounded divide-y divide-gray-100 bg-white shadow">
                                            <ul class="p-3 space-y-3 text-sm" aria-labelledby="dropdownRadioButton">
                                                {% for i in myFilter.form.phenotype %}
                                                    <li>
                                                    <div class="flex items-center">
                                                        <label for="default-radio-1" class="text-sm font-medium text-stone-800">{{i}}</label>
                                                    </div>
                                                </li>
                                                {%endfor%}
                                            </ul>
                                        </div>
                                    </div>

                                    <span class=" font-medium">Tissue:</span>
                                    <div class="relative  cursor-pointer text-white focus:outline-none bg-orange-700 hover:bg-orange-600 rounded-lg">
                                        <div filter="tissue" class="flex btnFilterClass justify-center items-center">
                                            <span class="font-normal pr-2">Select values</span>
                                            <svg class="h-4 w-4 fill-current" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                                <path d="M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"/>
                                            </svg>
                                        </div>
                                        <div id="Div_tissue" class="hidden z-30 w-full absolute rounded divide-y divide-gray-100 bg-white shadow">
                                            <ul class="p-3 space-y-3 text-sm" aria-labelledby="dropdownRadioButton">
                                                {% for i in myFilter.form.tissue %}
                                                    <li>
                                                    <div class="flex items-center">
                                                        <label for="default-radio-1" class="text-sm font-medium text-stone-800">{{i}}</label>
                                                    </div>
                                                </li>
                                                {%endfor%}
                                            </ul>
                                        </div>
                                    </div>

                                    <span class=" font-medium">Experimental:</span>
                                    <div  class="relative  cursor-pointer text-white focus:outline-none bg-orange-700 hover:bg-orange-600 rounded-lg">
                                        <div filter="experimental" class="flex btnFilterClass justify-center items-center">
                                            <span class="font-normal pr-2">Select values</span>
                                            <svg class="h-4 w-4 fill-current" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                                <path d="M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"/>
                                            </svg>
                                        </div>
                                        <div id="Div_experimental" class="hidden z-30 w-full absolute rounded divide-y divide-gray-100 bg-white shadow">
                                            <ul class="p-3 space-y-3 text-sm" aria-labelledby="dropdownRadioButton">
                                                {% for i in myFilter.form.experimental %}
                                                    <li>
                                                    <div class="flex items-center">
                                                        <label for="default-radio-1" class="text-sm font-medium text-stone-800">{{i}}</label>
                                                    </div>
                                                </li>
                                                {%endfor%}
                                            </ul>
                                        </div>
                                    </div>

                                    <span class="font-medium">Interaction observed:</span>
                                    <div class="relative cursor-pointer text-white focus:outline-none bg-orange-700 hover:bg-orange-600 rounded-lg">
                                        <div filter="interaction_observed" class="flex btnFilterClass justify-center items-center">
                                            <span class="font-normal pr-2">Select values</span>
                                            <svg class="h-4 w-4 fill-current" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                                <path d="M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"/>
                                            </svg>
                                        </div>
                                        <div id="Div_interaction_observed" class="hidden z-30 w-full absolute rounded divide-y divide-gray-100 bg-white shadow">
                                            <ul class="p-3 space-y-3 text-sm" aria-labelledby="dropdownRadioButton">
                                                {% for i in myFilter.form.interaction_observed %}
                                                    <li>
                                                    <div class="flex items-center">
                                                        <label for="default-radio-1" class="text-sm font-medium text-stone-800">{{i}}</label>
                                                    </div>
                                                </li>
                                                {%endfor%}
                                            </ul>
                                        </div>
                                    </div>

                                    <span class="font-medium">Organism:</span>
                                    <div class="relative cursor-pointer text-white focus:outline-none bg-orange-700 hover:bg-orange-600 rounded-lg">
                                        <div filter="organism" class="flex btnFilterClass justify-center items-center">
                                            <span class="font-normal pr-2">Select values</span>
                                            <svg class="h-4 w-4 fill-current" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                                <path d="M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"/>
                                            </svg>
                                        </div>
                                        <div id="Div_organism" class="hidden z-10 w-full absolute rounded divide-y divide-gray-100 bg-white shadow">
                                            <ul class="p-3 space-y-3 text-sm" aria-labelledby="dropdownRadioButton">
                                                {% for i in myFilter.form.organism %}
                                                    <li>
                                                    <div class="flex items-center">
                                                        <label for="default-radio-1" class="text-sm font-medium text-stone-800">{{i}}</label>
                                                    </div>
                                                </li>
                                                {%endfor%}
                                            </ul>
                                        </div>
                                    </div>
                                        <span class="font-medium">Paper date range:</span> 
                                        <span class="pl-2 flex">{{myFilter.form.paper_date}}<span>
                                </div>
                                <div class="mt-3"></div>
                            </div>
                        </form>
                            <div class="relative flex w-full items-center justify-center pt-7">
                                <button form="ChagasFilters" type="submit" class="absolute left-0 py-2 px-4 bg-orange-700 hover:bg-orange-600 focus:ring-orange-600 focus:ring-offset-orange-200 text-white w-xs transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 rounded-lg ">
                                    Apply
                                </button>
                                {% if nb_filtered %}
                                <div class="absolute right-0 w-fit">
                                    <a class="py-2 px-4 bg-orange-700 hover:bg-orange-600 focus:ring-orange-600 focus:ring-offset-orange-200 text-white w-xs transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 rounded-lg" href="{%  url 'features:database' %}">Clear all filters</a>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    
                </div>
            </div>
            
            {# Attributes displaying (popup) #}
            <div id="divColumns" style="display:none" class="fixed z-[60] inset-0 overflow-y-auto">
                <div class="h-screen w-full z-10 inset-0 overflow-y-auto">
                    <div class="absolute w-full h-full inset-0 bg-gray-500 opacity-75"></div>
                    <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                        <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true"></span>
                        <div class="inline-block relative overflow-hidden transform transition-all sm:align-middle sm:max-w-fit" role="dialog" aria-modal="true" aria-labelledby="modal-headline">
                            <div>
                                <div class="rounded-lg p-1 bg-white shadow">
                                    <div class="absolute right-4 top-4">
                                        <button class="btnColumns hover:text-orange-700 bg-transparent border border-transparent">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="h-6 w-6" viewBox="0 0 1792 1792">
                                                <path d="M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"></path>
                                            </svg>
                                        </button>
                                    </div>
                                    <div class="bg-white">
                                        <div class="text-center w-full mx-auto py-4 px-4 sm:px-6 lg:py-7 lg:px-8 z-20">
                                            <h2 class="text-3xl font-extrabold text-neutral-800 sm:text-4xl">
                                                <span class="block">
                                                    Table Columns
                                                </span>
                                            </h2>  
                                            <div class="w-full pt-2 lg:pt-2 bg-white rounded-lg shadow-lg lg:w-full">
                                                <div class="grid grid-cols-2 gap-4">
                                                    <ul class="divide-y-2 divide-gray-400">
                                                        <li class="flex justify-between p-3 hover:rounded-t-lg hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="feature_name">Feature name</label>
                                                            <input class="toggle-vis check box" type="checkbox" id="feature_name" name="feature_name" data-column="1" checked> {# "checked" leaves box in checked mode even after refresh #}
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="feature_description">Feature description</label>
                                                            <input class="toggle-vis check box" type="checkbox" id="feature_description" name="feature_description" data-column="2" checked>
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="feature_name_paper">Feature name in paper</label>
                                                            <input class="toggle-vis check box" type="checkbox" id="feature_name_paper" name="feature_name_paper" data-column="3">
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="feature_id">Feature ID</label>
                                                            <input class="toggle-vis check box" type="checkbox" id="feature_id" name="feature_id" data-column="4" checked>
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="feature_type">Feature type</label>
                                                            <input class="toggle-vis check box" type="checkbox" id="feature_type" name="feature_type" data-column="5" checked>
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="feature_variation">Feature variation</label>
                                                            <input class="toggle-vis check" type="checkbox" id="feature_variation" name="feature_variation" data-column="6">
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="phenotype1">Phenotype 1</label>
                                                            <input class="toggle-vis check" type="checkbox" id="phenotype1" name="phenotype1" data-column="7" checked>
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="phenotype1_description">Description phenotype 1</label>
                                                            <input class="toggle-vis check" type="checkbox" id="phenotype1_description" name="phenotype1_description" data-column="8">
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="phenotype2">Phenotype 2</label>
                                                            <input class="toggle-vis check" type="checkbox" id="phenotype2" name="phenotype2" data-column="9" checked>
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="phenotype2_description">Description phenotype 2</label>
                                                            <input class="toggle-vis check" type="checkbox" id="phenotype2_description" name="phenotype2_description" data-column="10"> 
                                                        </li>                                                  
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="tissue">Tissue</label>
                                                            <input class="toggle-vis check" type="checkbox" id="tissue" name="tissue" data-column="11" checked>
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="tissue_description">Tissue description</label>
                                                            <input class="toggle-vis check" type="checkbox" id="tissue_description" name="tissue_description" data-column="12">
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:rounded-t-lg hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="experimental">Experimental</label>
                                                            <input class="toggle-vis check" type="checkbox" id="experimental" name="experimental" data-column="13" checked>
                                                        </li>
                                                    </ul>
                                                    <ul class="divide-y-2 divide-gray-400" style="display: inline-block">
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="method">Method</label>
                                                            <input class="toggle-vis check" type="checkbox" id="method" name="method" data-column="14">
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="interaction_observed">Interaction observed</label>
                                                            <input class="toggle-vis check" type="checkbox" id="interaction_observed" name="interaction_observed" data-column="15">
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="name_interactive_features">Name of interactive feature</label>
                                                            <input class="toggle-vis check" type="checkbox" id="name_interactive_features" name="name_interactive_features" data-column="16">
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="id_interactive_features">ID of interactive feature</label>
                                                            <input class="toggle-vis check" type="checkbox" id="id_interactive_features" name="id_interactive_features" data-column="17">
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="type_interactive_features">Type of interactive feature</label>
                                                            <input class="toggle-vis check" type="checkbox" id="type_interactive_features" name="type_interactive_features" data-column="18">
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="organism">Organism</label>
                                                            <input class="toggle-vis check" type="checkbox" id="organism" name="organism" data-column="19" checked>
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="population">Population</label>
                                                            <input class="toggle-vis check" type="checkbox" id="population" name="population" data-column="20">
                                                        </li>     
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="tcruzi_strain"><span class="italic">T.cruzi</span> strain</label>
                                                            <input class="toggle-vis check" type="checkbox" id="tcruzi_strain" name="tcruzi_strain" data-column="21">
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="pmid">Paper PMID</label>
                                                            <input class="toggle-vis check" type="checkbox" id="pmid" name="pmid" data-column="22" checked>
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="doi">Paper DOI</label>
                                                            <input class="toggle-vis check" type="checkbox" id="doi" name="doi" data-column="23">
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="paper_title">Paper title</label>
                                                            <input class="toggle-vis check" type="checkbox" id="paper_title" name="paper_title" data-column="24">
                                                        </li>
                                                        <li class="flex justify-between p-3 hover:bg-blue-600 hover:text-blue-200">
                                                            <label for="paper_date">Paper date</label>
                                                            <input class="toggle-vis check" type="checkbox" id="paper_date" name="paper_date" data-column="25" checked>
                                                        </li>
                                                        <li class="flex justify-between p-3"></li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="flex items-center justify-between gap-4 w-full mt-8">
                                                <button type="button" class="btnColumns py-2 px-4 bg-orange-700 hover:bg-orange-600 focus:ring-orange-500 focus:ring-offset-orange-200 text-white w-full transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2  rounded-lg ">
                                                    Return
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>  

            {# Table #}
            <div class="max-w-screen flex justify-center items-center">
                <div class="mt-4 overflow-x-scroll ">
                    <div class="">
                        <div class="sm:-mx-6 lg:-mx-8">
                            <div class="inline-block  sm:px-6 lg:px-8">
                                <div class="flex ">
                                    {# Table interaction buttons #}
                                    <div class="">
                                        <span><span id="selection_number" class="font-semibold text-orange-700">0</span> row selected out of <span class="font-semibold">{{ nb_objects }}</span> entries {% if nb_filtered %}(<span class="font-semibold text-orange-700">{{ nb_filtered }}</span> filtered)</span> {% endif %}
                                    </div>  
                                    <button form="TableDl" type="submit" class="pl-3 focus:outline-none hover:text-orange-700 focus:text-orange-600 rounded-t cursor-pointer">
                                        <div class="flex items-center mb-3">
                                            <span class="mr-auto">
                                                <svg class="fill-current w-4 h-4 mr-2 " xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                                                    <path d="M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"/>
                                                </svg>
                                            </span>
                                            <span class="ml-0 font-semibold">Download</span>
                                        </div>
                                    </button>
                                    <button class="btnColumns pl-3 focus:outline-none hover:text-orange-700 focus:text-orange-600 rounded-t cursor-pointer">
                                        <div class="flex items-center mb-3">
                                            <span class="mr-auto">
                                                <svg class="fill-current w-4 h-4 mr-2 " xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                                                    <path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/>
                                                </svg>
                                            </span>
                                            <span class="ml-0 font-semibold">Customize columns</span>
                                        </div>
                                    </button>    
                                </div>    

                                <form id="TableDl" method="POST">
                                    {% csrf_token %}
                                    <table id="table_db" class="">
                                        <thead class="bg-orange-700 text-white text-left text-xs h-fit font-bold uppercase">
                                            <tr class="whitespace-nowrap">
                                                <th scope="col" class="px-6 py-3 tracking-wider border-r border-r-white">
                                                    <div class="form-check"> 
                                                        <input id="all_checkboxes" name="boxes" used="no" class="form-check-input h-4 w-4 border border-gray-300 rounded-sm bg-white focus:outline-none transition duration-200 bg-no-repeat bg-center bg-contain  cursor-pointer" type="checkbox" value="0000"></input>
                                                    </div>
                                                </th>
                                                <th scope="col" class="px-6 py-3 tracking-wider border-r border-r-white h-fit 1">
                                                    Feature name
                                                </th>
                                                <th scope="col" class="px-6 py-3 tracking-wider border-r border-r-white 2">
                                                    Feature description
                                                </th>
                                                <th scope="col" class="[&>tbody>*:nth-child(odd)]:hidden px-6 py-3 tracking-wider border-r border-r-white 3">
                                                    Feature name in paper
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 4">
                                                    Feature ID
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 5">
                                                    Feature type
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 6">
                                                    Feature variation
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 7">
                                                    Phenotype 1
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 8">
                                                    Description phenotype 1
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 9">
                                                    Phenotype 2
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 10">
                                                    Description phenotype 2
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 11">
                                                    Tissue
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 12">
                                                    Tissue description
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 13">
                                                    Experimental
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 14">
                                                    Method
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 15">
                                                    Interaction observed
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 16">
                                                    Name of the interactive features
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 17">
                                                    ID of the interactive features
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 18">
                                                    Type of interactive feature
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 19">
                                                    Organism
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 20">
                                                    Population
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 21">
                                                    T.cruzi strain
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 22">
                                                    Paper PMID
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 23">
                                                    Paper DOI
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 24">
                                                    Paper title
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider 25">
                                                    Paper date
                                                </th>                                 
                                            </tr>
                                        </thead>
                                        <tfoot class="bg-orange-700 text-white text-left text-xs h-fit font-bold uppercase">
                                            <tr class="whitespace-nowrap">
                                                <th scope="col" class="px-6 py-3 tracking-wider border-r border-r-white">
                                                </th>
                                                <th scope="col" class="px-6 py-3 tracking-wider border-r border-r-white h-fit 1">
                                                    Feature name
                                                </th>
                                                <th scope="col" class="px-6 py-3 tracking-wider border-r border-r-white 2">
                                                    Feature description
                                                </th>
                                                <th scope="col" class="[&>tbody>*:nth-child(odd)]:hidden px-6 py-3 tracking-wider border-r border-r-white 3">
                                                    Feature name in paper
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 4">
                                                    Feature ID
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 5">
                                                    Feature type
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 6">
                                                    Feature variation
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 7">
                                                    Phenotype 1
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 8">
                                                    Description phenotype 1
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 9">
                                                    Phenotype 2
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 10">
                                                    Description phenotype 2
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 11">
                                                    Tissue
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 12">
                                                    Tissue description
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 13">
                                                    Experimental
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 14">
                                                    Method
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 15">
                                                    Interaction observed
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 16">
                                                    Name of the interactive features
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 17">
                                                    ID of the interactive features
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 18">
                                                    Type of interactive feature
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 19">
                                                    Organism
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 20">
                                                    Population
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 21">
                                                    T.cruzi strain
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 22">
                                                    Paper PMID
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 23">
                                                    Paper DOI
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider border-r border-r-white 24">
                                                    Paper title
                                                </th>
                                                <th scope="col" class="px-6 py-3   tracking-wider 25">
                                                    Paper date
                                                </th>                                   
                                            </tr>
                                        </tfoot>
                                    
                                        <tbody class="[&>*:nth-child(odd)]:bg-white [&>*:nth-child(even)]:bg-gray-300 h-fit">  
                                        {% for sample in response.object_list %}
                                            <tr> 
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium border-r border-l border-b">
                                                    <div class="form-check"> {# Unique IDs of rows registered in the DB (checkboxes column) #}
                                                        <input name="boxes" class="form-check-input h-4 w-4 border border-gray-300 rounded-sm bg-white focus:outline-none transition duration-200 bg-no-repeat bg-center bg-contain to_check cursor-pointer" type="checkbox" value="{{sample.id}}"></input>
                                                    </div>
                                                </td>
                                                <td class="px-6  whitespace-nowrap text-sm font-bold 1 border-r border-l border-b">  
                                                    {{ sample.feature_name | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 2 border-r border-l border-b">
                                                    {{ sample.feature_description | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>
                                                <td hidden="true" class="px-6 py-2 display:none whitespace-nowrap text-sm font-medium 3 border-r border-l border-b">
                                                    {{ sample.feature_name_paper | default_if_none:'<a class="text-gray-500">None</a>' }}    
                                                </td>                       
                                                <td class="px-6 py-2 whitespace-nowrap text-blue-600 hover:text-blue-800 4 border-r border-l border-b">
                                                    {% if sample.feature_type == 'Polymorphism' %} 
                                                        <a class="underline visited:text-purple-600" href="https://www.ensembl.org/{{ sample.organism }}/Variation/Explore?v={{ sample.feature_id }}" target="_blank">{{ sample.feature_id }}</a>
                                                    {% elif sample.feature_id != None %}
                                                        <a class="underline visited:text-purple-600" href="https://www.ensembl.org/{{ sample.organism }}/Gene/Summary?g={{ sample.feature_id }}" target="_blank">{{ sample.feature_id }}</a>
                                                    {% else %}
                                                        <a class="text-gray-500">{{ sample.feature_id }}</a>
                                                    {% endif %}
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 5 border-r border-l border-b">
                                                    {{ sample.feature_type | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 6 border-r border-l border-b">
                                                    {{ sample.feature_variation | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 7 border-r border-l border-b">
                                                    {{ sample.phenotype1 | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 8 border-r border-l border-b">
                                                    {{ sample.phenotype1_description | default_if_none:'<a class="text-gray-500">None</a>' }}svg
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 9 border-r border-l border-b">
                                                    {{ sample.phenotype2 | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 10 border-r border-l border-b">
                                                    {{ sample.phenotype2_description | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 11 border-r border-l border-b">
                                                    {{ sample.tissue | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 12 border-r border-l border-b">
                                                    {{ sample.tissue_description | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 13 border-r border-l border-b">
                                                    {{ sample.experimental | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 14 border-r border-l border-b">
                                                    {{ sample.method | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 15 border-r border-l border-b">
                                                    {{ sample.interaction_observed | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 16 border-r border-l border-b">
                                                    {{ sample.name_interactive_features | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 17 border-r border-l border-b">
                                                    {{ sample.id_interactive_features | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 18 border-r border-l border-b">
                                                    {{ sample.type_interactive_features | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 19 border-r border-l border-b">
                                                    {{ sample.organism | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 20 border-r border-l border-b">
                                                    {{ sample.population | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 21 border-r border-l border-b">
                                                    {{ sample.tcruzi_strain | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-blue-600 hover:text-blue-800 22 border-r border-l border-b">  
                                                    {% if sample.pmid is None %} 
                                                        <a class="text-gray-500">{{ sample.pmid }}</a>
                                                    {% else %}
                                                        <a class="underline visited:text-purple-600" href="https://pubmed.ncbi.nlm.nih.gov/{{ sample.pmid }}" target="_blank">{{ sample.pmid }}</a>  
                                                    {% endif %}    
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-blue-600 hover:text-blue-800 23 border-r border-l border-b">  
                                                    {% if sample.doi is None %} 
                                                        <a class="text-gray-500">{{ sample.doi }}</a>
                                                    {% else %}
                                                        <a class="underline visited:text-purple-600" href="https://doi.org/{{ sample.doi }}" target="_blank">{{ sample.doi }}</a>  
                                                    {% endif %}    
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 24 border-r border-l border-b">
                                                    {{ sample.paper_title | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>  
                                                <td class="px-6 py-2 whitespace-nowrap text-sm font-medium 25 border-r border-l border-b">
                                                    {{ sample.paper_date | default_if_none:'<a class="text-gray-500">None</a>' }}
                                                </td>  
                                            </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                </form>

                                {# Pagination buttons #}
                                <div class="pt-2 text-center text-white items-center grid gap-1 grid-cols-5 w-fit">
                                    {% if response.has_previous %}
                                        <a class="w-full border text-base font-medium bg-orange-700 hover:bg-orange-600 p-1 rounded-2xl" href="?{% query_transform request page=1 all='{{all_box}}' %}">First</a>
                                        <a class="w-full border text-base font-medium bg-orange-700 hover:bg-orange-600 p-1 rounded-2xl" href="?{% query_transform request page=response.previous_page_number all='{{all_box}}' %}">Previous</a>
                                    {% endif %}
                                    
                                    <div class="">
                                        <span class="font-normal text-neutral-800">Page <span class="font-semibold text-orange-700">{{ response.number }}</span> of <span class="font-semibold text-neutral-800">{{ response.paginator.num_pages }}</span></span>
                                    </div>

                                    {% if response.has_next %}
                                        <a class="w-full border text-base font-medium bg-orange-700 hover:bg-orange-600 p-1 rounded-2xl" href="?{% query_transform request page=response.next_page_number all='{{all_box}}' %}">Next</a>
                                        <a class="w-full border text-base font-medium bg-orange-700 hover:bg-orange-600 p-1 rounded-2xl" href="?{% query_transform request page=response.paginator.num_pages all='{{all_box}}' %}">Last</a>
                                    {% endif %}
                                </div>

                                <p class="pb-3 pt-3 italic text-sm ml-0 font-normal">Last update: {% if CHAGAS_VERSION %} <span class="font-semibold">{{CHAGAS_VERSION}}</span> {% else %} <span class="font-semibold">Unknown</span> {% endif %}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
{% endblock %}
